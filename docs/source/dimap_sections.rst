BEAM-DIMAP Data
###############
The BEAM-DIMAP file is the .dim file that contains all the metadata for a satellite scene and is used to load Sentinel
data into SNAP software.

The top of the BEAM-DIMAP file is the core part of the metadata which is shared with Sentinel-1 and Sentinel-2
workflow (Sentinel-3 is untested at this time).

The middle part is the BEAM-DIMAP file contains mission specific metadata and may change depending on which satellite
you are using.

The bottom of the BEAM-DIMAP file contains the processing graph which is also found on all Sentinel missions.
This section contains the logs of all the processing and specific parameters that has been done on this particular
dataset.

Abstracted Metadata
===================
Abstracted metadata contains information that is mostly related to scene acquisition and is only used
in Sentinel-1 BEAM-DIMAP data.

Attributes
**********
**Code Usage**: :func:`AbstractedMetadata.get_attribute <PyBeamDimap.reader.abstracted_metadata.AbstractedMetadata.get_attribute>`

The table below contains the basic attributes which are non-nested.

+-------------------------------+--------------------------------------------------------+------------------------------------------+
| Name                          | Description                                            | SAMPLE VALUE                             |
+===============================+========================================================+==========================================+
| PRODUCT                       | Product name                                           | S1B_IW_SLC__1SDV_70FA                    |
+-------------------------------+--------------------------------------------------------+------------------------------------------+
| PRODUCT_TYPE                  | Product type                                           | SLC                                      |
+-------------------------------+--------------------------------------------------------+------------------------------------------+
| SPH_DESCRIPTOR                | Description                                            | Sentinel-1 IW Level-1 SLC Product        |
+-------------------------------+--------------------------------------------------------+------------------------------------------+
| MISSION                       | Satellite mission                                      | SENTINEL-1B                              |
+-------------------------------+--------------------------------------------------------+------------------------------------------+
| ACQUISITION_MODE              | Acquisition mode                                       | IW                                       |
+-------------------------------+--------------------------------------------------------+------------------------------------------+
| antenna_pointing              | Right or left facing                                   | right                                    |
+-------------------------------+--------------------------------------------------------+------------------------------------------+
| BEAMS                         | Beams used                                             | -                                        |
+-------------------------------+--------------------------------------------------------+------------------------------------------+
| SWATH                         | Swath name                                             | IW2                                      |
+-------------------------------+--------------------------------------------------------+------------------------------------------+
| PROC_TIME                     | Processed time                                         | 12:30.0                                  |
+-------------------------------+--------------------------------------------------------+------------------------------------------+
| Processing_system_identifier  | Processing system identifier                           | ESA Sentinel-1 IPF 003.10                |
+-------------------------------+--------------------------------------------------------+------------------------------------------+
| orbit_cycle                   | Cycle                                                  | 108                                      |
+-------------------------------+--------------------------------------------------------+------------------------------------------+
| REL_ORBIT                     | Track                                                  | 155                                      |
+-------------------------------+--------------------------------------------------------+------------------------------------------+
| ABS_ORBIT                     | Orbit                                                  | 17856                                    |
+-------------------------------+--------------------------------------------------------+------------------------------------------+
| STATE_VECTOR_TIME             | Time of orbit state vector                             | 56:42.3                                  |
+-------------------------------+--------------------------------------------------------+------------------------------------------+
| VECTOR_SOURCE                 | State vector source                                    | -                                        |
+-------------------------------+--------------------------------------------------------+------------------------------------------+
| incidence_near                |                                                        | 35.99512863                              |
+-------------------------------+--------------------------------------------------------+------------------------------------------+
| incidence_far                 |                                                        | 41.45061819                              |
+-------------------------------+--------------------------------------------------------+------------------------------------------+
| slice_num                     | Slice number                                           | 3                                        |
+-------------------------------+--------------------------------------------------------+------------------------------------------+
| data_take_id                  | Data take identifier                                   | 137637                                   |
+-------------------------------+--------------------------------------------------------+------------------------------------------+
| first_line_time               | First zero doppler azimuth time                        | 57:57.9                                  |
+-------------------------------+--------------------------------------------------------+------------------------------------------+
| last_line_time                | Last zero doppler azimuth time                         | 58:03.8                                  |
+-------------------------------+--------------------------------------------------------+------------------------------------------+
| first_near_lat                |                                                        | 64.26764263                              |
+-------------------------------+--------------------------------------------------------+------------------------------------------+
| first_near_long               |                                                        | -23.81305948                             |
+-------------------------------+--------------------------------------------------------+------------------------------------------+
| first_far_lat                 |                                                        | 64.26764263                              |
+-------------------------------+--------------------------------------------------------+------------------------------------------+
| first_far_long                |                                                        | -21.82057821                             |
+-------------------------------+--------------------------------------------------------+------------------------------------------+
| last_near_lat                 |                                                        | 63.74358346                              |
+-------------------------------+--------------------------------------------------------+------------------------------------------+
| last_near_long                |                                                        | -23.81305948                             |
+-------------------------------+--------------------------------------------------------+------------------------------------------+
| last_far_lat                  |                                                        | 63.74358346                              |
+-------------------------------+--------------------------------------------------------+------------------------------------------+
| last_far_long                 |                                                        | -21.82057821                             |
+-------------------------------+--------------------------------------------------------+------------------------------------------+
| PASS                          | ASCENDING or DESCENDING                                | DESCENDING                               |
+-------------------------------+--------------------------------------------------------+------------------------------------------+
| SAMPLE_TYPE                   | DETECTED or COMPLEX                                    | COMPLEX                                  |
+-------------------------------+--------------------------------------------------------+------------------------------------------+
| mds1_tx_rx_polar              | Polarization                                           | VV                                       |
+-------------------------------+--------------------------------------------------------+------------------------------------------+
| mds2_tx_rx_polar              | Polarization                                           | VV                                       |
+-------------------------------+--------------------------------------------------------+------------------------------------------+
| mds3_tx_rx_polar              | Polarization                                           | -                                        |
+-------------------------------+--------------------------------------------------------+------------------------------------------+
| mds4_tx_rx_polar              | Polarization                                           | -                                        |
+-------------------------------+--------------------------------------------------------+------------------------------------------+
| polsar_data                   | Polarimetric Matrix                                    | 0                                        |
+-------------------------------+--------------------------------------------------------+------------------------------------------+
| algorithm                     | Processing algorithm                                   | -                                        |
+-------------------------------+--------------------------------------------------------+------------------------------------------+
| azimuth_looks                 |                                                        | 2                                        |
+-------------------------------+--------------------------------------------------------+------------------------------------------+
| range_looks                   |                                                        | 6                                        |
+-------------------------------+--------------------------------------------------------+------------------------------------------+
| range_spacing                 | Range sample spacing                                   | 41.85918195                              |
+-------------------------------+--------------------------------------------------------+------------------------------------------+
| azimuth_spacing               | Azimuth sample spacing                                 | 41.85918195                              |
+-------------------------------+--------------------------------------------------------+------------------------------------------+
| pulse_repetition_frequency    | PRF                                                    | 1717.128974                              |
+-------------------------------+--------------------------------------------------------+------------------------------------------+
| radar_frequency               | Radar frequency                                        | 5405.000454                              |
+-------------------------------+--------------------------------------------------------+------------------------------------------+
| line_time_interval            |                                                        | 0.004111113                              |
+-------------------------------+--------------------------------------------------------+------------------------------------------+
| total_size                    | Total product size                                     | 143                                      |
+-------------------------------+--------------------------------------------------------+------------------------------------------+
| num_output_lines              | Raster height                                          | 1390                                     |
+-------------------------------+--------------------------------------------------------+------------------------------------------+
| num_samples_per_line          | Raster width                                           | 5282                                     |
+-------------------------------+--------------------------------------------------------+------------------------------------------+
| subset_offset_x               | X coord of UL corner of subset in original image       | 0                                        |
+-------------------------------+--------------------------------------------------------+------------------------------------------+
| subset_offset_y               | Y coord of UL corner of subset in original image       | 9084                                     |
+-------------------------------+--------------------------------------------------------+------------------------------------------+
| srgr_flag                     | SRGR applied                                           | 1                                        |
+-------------------------------+--------------------------------------------------------+------------------------------------------+
| avg_scene_height              | Average scene height ellipsoid                         | 116.0870183                              |
+-------------------------------+--------------------------------------------------------+------------------------------------------+
| map_projection                | Map projection applied                                 | WGS84(DD)                                |
+-------------------------------+--------------------------------------------------------+------------------------------------------+
| is_terrain_corrected          | orthorectification applied                             | 1                                        |
+-------------------------------+--------------------------------------------------------+------------------------------------------+
| DEM                           | Digital Elevation Model used                           | Copernicus 30m Global DEM                |
+-------------------------------+--------------------------------------------------------+------------------------------------------+
| geo_ref_system                | geographic reference system                            | WGS84                                    |
+-------------------------------+--------------------------------------------------------+------------------------------------------+
| lat_pixel_res                 | pixel resolution in geocoded image                     | 3.77E-04                                 |
+-------------------------------+--------------------------------------------------------+------------------------------------------+
| lon_pixel_res                 | pixel resolution in geocoded image                     | 3.77E-04                                 |
+-------------------------------+--------------------------------------------------------+------------------------------------------+
| slant_range_to_first_pixel    | Slant range to 1st data sample                         | 850539.3959                              |
+-------------------------------+--------------------------------------------------------+------------------------------------------+
| ant_elev_corr_flag            | Antenna elevation applied                              | 0                                        |
+-------------------------------+--------------------------------------------------------+------------------------------------------+
| range_spread_comp_flag        | range spread compensation applied                      | 0                                        |
+-------------------------------+--------------------------------------------------------+------------------------------------------+
| replica_power_corr_flag       | Replica pulse power correction applied                 | 0                                        |
+-------------------------------+--------------------------------------------------------+------------------------------------------+
| abs_calibration_flag          | Product calibrated                                     | 0                                        |
+-------------------------------+--------------------------------------------------------+------------------------------------------+
| calibration_factor            | Calibration constant                                   | 99999                                    |
+-------------------------------+--------------------------------------------------------+------------------------------------------+
| chirp_power                   | Chirp power                                            | 99999                                    |
+-------------------------------+--------------------------------------------------------+------------------------------------------+
| inc_angle_comp_flag           | incidence angle compensation applied                   | 0                                        |
+-------------------------------+--------------------------------------------------------+------------------------------------------+
| ref_inc_angle                 | Reference incidence angle                              | 99999                                    |
+-------------------------------+--------------------------------------------------------+------------------------------------------+
| ref_slant_range               | Reference slant range                                  | 99999                                    |
+-------------------------------+--------------------------------------------------------+------------------------------------------+
| ref_slant_range_exp           | Reference slant range exponent                         | 99999                                    |
+-------------------------------+--------------------------------------------------------+------------------------------------------+
| rescaling_factor              | Rescaling factor                                       | 99999                                    |
+-------------------------------+--------------------------------------------------------+------------------------------------------+
| bistatic_correction_applied   |                                                        | 1                                        |
+-------------------------------+--------------------------------------------------------+------------------------------------------+
| range_sampling_rate           | Range Sampling Rate                                    | 64.34523813                              |
+-------------------------------+--------------------------------------------------------+------------------------------------------+
| range_bandwidth               | Bandwidth total in range                               | 56.5                                     |
+-------------------------------+--------------------------------------------------------+------------------------------------------+
| azimuth_bandwidth             | Bandwidth total in azimuth                             | 327                                      |
+-------------------------------+--------------------------------------------------------+------------------------------------------+
| multilook_flag                | Multilook applied                                      | 1                                        |
+-------------------------------+--------------------------------------------------------+------------------------------------------+
| coregistered_stack            | Coregistration applied                                 | 1                                        |
+-------------------------------+--------------------------------------------------------+------------------------------------------+
| external_calibration_file     | External calibration file used                         | -                                        |
+-------------------------------+--------------------------------------------------------+------------------------------------------+
| orbit_state_vector_file       | Orbit file used                                        | Sentinel Precise  S1B_OPER_AUX.EOF.zip   |
+-------------------------------+--------------------------------------------------------+------------------------------------------+
| metadata_version              | AbsMetadata version                                    | 6                                        |
+-------------------------------+--------------------------------------------------------+------------------------------------------+
| centre_lat                    |                                                        | 64.27210589                              |
+-------------------------------+--------------------------------------------------------+------------------------------------------+
| centre_lon                    |                                                        | -22.62701661                             |
+-------------------------------+--------------------------------------------------------+------------------------------------------+
| centre_heading                |                                                        | 191.2027805                              |
+-------------------------------+--------------------------------------------------------+------------------------------------------+
| centre_heading2               |                                                        | 11.1980375                               |
+-------------------------------+--------------------------------------------------------+------------------------------------------+
| firstValidPixel               |                                                        | 65                                       |
+-------------------------------+--------------------------------------------------------+------------------------------------------+
| lastValidPixel                |                                                        | 24317                                    |
+-------------------------------+--------------------------------------------------------+------------------------------------------+
| slrTimeToFirstValidPixel      |                                                        | 0.00283758                               |
+-------------------------------+--------------------------------------------------------+------------------------------------------+
| slrTimeToLastValidPixel       |                                                        | 0.003026032                              |
+-------------------------------+--------------------------------------------------------+------------------------------------------+
| firstValidLineTime            |                                                        | 6.21E+08                                 |
+-------------------------------+--------------------------------------------------------+------------------------------------------+
| lastValidLineTime             |                                                        | 6.21E+08                                 |
+-------------------------------+--------------------------------------------------------+------------------------------------------+
| collocated_stack              |                                                        | 1                                        |
+-------------------------------+--------------------------------------------------------+------------------------------------------+

Baselines
*********
**Code Usage**: :func:`AbstractedMetadata.baselines <PyBeamDimap.reader.abstracted_metadata.AbstractedMetadata.baselines>`.

Baseline data between two Sentinel-1 missions.

.. code-block:: python
   :caption: Sample output of parsed baseline data by PyBeamDimap. Output of print command seen in table below.

   >>> from PyBeamDimap.missions import Sentinel1

   >>> dimap = Sentinel1('S1.dim')
   >>> baselines = dimap.AbstractedMetadata.baselines
   >>> print(baselines)

+---------------------+--------------+----------------+
|                     | 2-Sep-19     | 14-Sep-19      |
+=====================+==============+================+
| Perp Baseline       | 10.54263401  | -10.54257965   |
+---------------------+--------------+----------------+
| Temp Baseline       | -12.00000668 | 12.00000668    |
+---------------------+--------------+----------------+
| Modelled Coherence  | 0.979764223  | 0.979764283    |
+---------------------+--------------+----------------+
| Height of Ambiguity | -1451.082275 | 1451.08252     |
+---------------------+--------------+----------------+
| Doppler Difference  | -0.827129006 | 0.827129006    |
+---------------------+--------------+----------------+
| Secondary Date      | 14-Sep-19    | 2-Sep-19       |
+---------------------+--------------+----------------+

Burst Boundary
**************
**Code Usage**: :func:`AbstractedMetadata.burst_boundary <PyBeamDimap.reader.abstracted_metadata.AbstractedMetadata.burst_boundary>`.

Data related to the burst data in Sentinel-1 imagery.

.. code-block:: python
   :caption: Sample output of parsed burst boundary data by PyBeamDimap. Output of print command seen in table below.

   >>> from PyBeamDimap.missions import Sentinel1

   >>> dimap = Sentinel1('S1.dim')
   >>> bursts = dimap.AbstractedMetadata.burst_boundary
   >>> print(bursts)

+--------------------------+-------------+--------------+
|                          | Burst0_IW2  | Burst1_IW2   |
+==========================+=============+==============+
| FirstLineDeburst         | 0           | 1426.499842  |
+--------------------------+-------------+--------------+
| LastLineDeburst          | 1426.499842 | 2852.999743  |
+--------------------------+-------------+--------------+
| FirstLineTime            | 6.21E+08    | 6.21E+08     |
+--------------------------+-------------+--------------+
| LastLineTime             | 6.21E+08    | 6.21E+08     |
+--------------------------+-------------+--------------+
| FirstPixelTime           | 0.002837075 | 0.002837075  |
+--------------------------+-------------+--------------+
| LastPixelTime            | 0.003027563 | 0.003027563  |
+--------------------------+-------------+--------------+
| FirstValidPixelTime      | 0.00283758  | 0.00283758   |
+--------------------------+-------------+--------------+
| LastValidPixelTime       | 0.003026032 | 0.003026032  |
+--------------------------+-------------+--------------+
| FirstLineBoundaryPoints  |             |              |
+--------------------------+-------------+--------------+
| LastLineBoundaryPoints   |             |              |
+--------------------------+-------------+--------------+

Doppler Centroid Coefficients
*****************************
**Code Usage**: :func:`AbstractedMetadata.doppler_centroid_coeffs <PyBeamDimap.reader.abstracted_metadata.AbstractedMetadata.doppler_centroid_coeffs>`.

Get coefficients used to calculate doppler centroids.

..  code-block:: python
    :caption: Getting doppler centroid coefficients

        >>> from PyBeamDimap.missions import Sentinel1

        >>> dimap = Sentinel1('S1.dim')
        >>> doppler = dimap.AbstractedMetadata.doppler_centroid_coeffs
        >>> print(doppler)

The output of the print command is seen in the table below. Table is truncated for preview purposes only.

+--------------------+------------------+------------------+-------------------+
|                    | dop_coef_list.1  | dop_coef_list.2  | dop_coef_list.3   |
+====================+==================+==================+===================+
| zero_doppler_time  | 57:40.2          | 57:42.9          | 57:45.7           |
+--------------------+------------------+------------------+-------------------+
| slant_range_time   | 5369435.814      | 5369435.814      | 5369435.814       |
+--------------------+------------------+------------------+-------------------+
| coefficient.1      | 1.498285         | 1.24021          | 1.378758          |
+--------------------+------------------+------------------+-------------------+
| coefficient.2      | -663.2895        | -649.9965        | -616.3349         |
+--------------------+------------------+------------------+-------------------+
| coefficient.3      | 144938.1         | 145675.6         | 134843.4          |
+--------------------+------------------+------------------+-------------------+

ESD Measurements
****************
**Code Usage**: :func:`AbstractedMetadata.EsdMeasurement <PyBeamDimap.reader.abstracted_metadata.EsdMeasurement>`.

Data related to enhanced spectral diversity. This nested section is relatively complex and requires some additional
steps to get the right data you need. See code usage for more details.

..  code-block:: python
    :caption: Getting ESD measurement data with default parameters

        >>> from PyBeamDimap.missions import Sentinel1

        >>> dimap = Sentinel1('S1.dim')
        # Take note `.dataframe()` is a method call that can accept arguments
        >>> esd = dimap.AbstractedMetadata.EsdMeasurement.dataframe()
        >>> print(esd)

+---------------+-------+
|               | IW2   |
+===============+=======+
| azimuthShift  | 0     |
+---------------+-------+
| rangeShift    | 0     |
+---------------+-------+

Look Directions
***************
**Code Usage**: :func:`AbstractedMetadata.look_direction <PyBeamDimap.reader.abstracted_metadata.AbstractedMetadata.look_directions>`.

Data related to the look direction during image acquisition.

..  code-block:: python
    :caption: Getting look direction data

        >>> from PyBeamDimap.missions import Sentinel1

        >>> dimap = Sentinel1('S1.dim')
        >>> look = dimap.AbstractedMetadata.look_directions
        >>> print(look)

+-----------+------------------+------------------+-------------------+
|           | look_direction1  | look_direction2  | look_direction3   |
+===========+==================+==================+===================+
| time      | 57:57.9          | 57:59.4          | 58:00.8           |
+-----------+------------------+------------------+-------------------+
| head_lat  | 64.26755881      | 64.18061055      | 64.09342563       |
+-----------+------------------+------------------+-------------------+
| head_lon  | -23.65814095     | -23.69511128     | -23.73210472      |
+-----------+------------------+------------------+-------------------+
| tail_lat  | 64.10826111      | 64.02157942      | 63.93464661       |
+-----------+------------------+------------------+-------------------+
| tail_lon  | -21.81954698     | -21.8621927      | -21.90486059      |
+-----------+------------------+------------------+-------------------+

Orbit Offsets
*************
**Code Usage**: :func:`AbstractedMetadata.orbit_offsets <PyBeamDimap.reader.abstracted_metadata.AbstractedMetadata.orbit_offsets>`.

Orbit offset data during image acquisition.

..  code-block:: python
    :caption: Getting orbit offset data

        >>> from PyBeamDimap.missions import Sentinel1

        >>> dimap = Sentinel1('S1.dim')
        >>> offsets = dimap.AbstractedMetadata.orbit_offsets
        >>> print(offsets)

+----------------+-------------------------------+
|                | init_offsets_slv1_02Sep2019   |
+================+===============================+
| init_offset_X  | 0                             |
+----------------+-------------------------------+
| init_offset_Y  | -1                            |
+----------------+-------------------------------+

Orbit State Vectors
*******************
**Code Usage**: :func:`AbstractedMetadata.orbit_state_vectors <PyBeamDimap.reader.abstracted_metadata.AbstractedMetadata.orbit_state_vectors>`.

Data related to the satellite orbit state vectors during image acquisition.

..  code-block:: python
    :caption: Getting orbit state vector data

        >>> from PyBeamDimap.missions import Sentinel1

        >>> dimap = Sentinel1('S1.dim')
        >>> osv = dimap.AbstractedMetadata.orbit_state_vectors
        >>> print(osv)

The print results are seen below. The dataframe shown is a truncated version for documentation preview purposes only.

+-------+---------------------------+---------------------------+---------------------------+
|       | orbit_vector1             | orbit_vector2             | orbit_vector3             |
+=======+===========================+===========================+===========================+
| time  | 02-SEP-2019 07:57:47.909  | 02-SEP-2019 07:57:48.909  | 02-SEP-2019 07:57:49.909  |
+-------+---------------------------+---------------------------+---------------------------+
| x_pos | 3085342.724               | 3090982.677               | 3096618.594               |
+-------+---------------------------+---------------------------+---------------------------+
| y_pos | -691610.5336              | -695560.998               | -699511.5057              |
+-------+---------------------------+---------------------------+---------------------------+
| z_pos | 6320008.356               | 6316825.3                 | 6313635.119               |
+-------+---------------------------+---------------------------+---------------------------+
| x_vel | 5641.969699               | 5637.9358                 | 5633.895573               |
+-------+---------------------------+---------------------------+---------------------------+
| y_vel | -3950.440933              | -3950.486919              | -3950.527891              |
+-------+---------------------------+---------------------------+---------------------------+
| z_vel | -3179.492029              | -3186.619094              | -3193.742584              |
+-------+---------------------------+---------------------------+---------------------------+


SRGR Coefficients
*****************
**Code Usage**: :func:`AbstractedMetadata.srgr_coeffs <PyBeamDimap.reader.abstracted_metadata.AbstractedMetadata.srgr_coeffs>`.

Conversion from Slant Range to Ground Range (SRGR) is done using these coefficients.

..  code-block:: python
    :caption: Getting SRGR coefficients

        >>> from PyBeamDimap.missions import Sentinel1

        >>> dimap = Sentinel1('S1.dim')
        >>> srgr = dimap.AbstractedMetadata.srgr_coeffs
        >>> print(srgr)

Dataframe below is truncated for preview purposes only.

+-------------------+--------------------+----------------------+-------------+
| element           | zero_doppler_time  | ground_range_origin  | srgr_coef   |
+===================+====================+======================+=============+
| srgr_coef_list.1  | 50:30.3            | 0                    | 8.96E-44    |
+-------------------+--------------------+----------------------+-------------+
| srgr_coef_list.2  | 50:31.3            | 0                    | 8.97E-44    |
+-------------------+--------------------+----------------------+-------------+
| srgr_coef_list.3  | 50:32.3            | 0                    | 9.00E-44    |
+-------------------+--------------------+----------------------+-------------+
| srgr_coef_list.4  | 50:33.3            | 0                    | 9.02E-44    |
+-------------------+--------------------+----------------------+-------------+
| srgr_coef_list.5  | 50:34.3            | 0                    | 9.03E-44    |
+-------------------+--------------------+----------------------+-------------+
| srgr_coef_list.6  | 50:35.3            | 0                    | 9.07E-44    |
+-------------------+--------------------+----------------------+-------------+
| srgr_coef_list.7  | 50:36.3            | 0                    | 9.12E-44    |
+-------------------+--------------------+----------------------+-------------+
| srgr_coef_list.8  | 50:37.3            | 0                    | 9.14E-44    |
+-------------------+--------------------+----------------------+-------------+
| srgr_coef_list.9  | 50:38.3            | 0                    | 9.14E-44    |
+-------------------+--------------------+----------------------+-------------+

Image Interpretation
====================
Image Interpretation is related to spectral band information for the Sentinel missions.

Processing Graph
================
When processing images with SNAP software the software will log all processes and parameters in this section.